<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6" lang="en">
<head>
    <title th:text="'Użytkownik ' + ${user.username}" ></title>
</head>
<body th:with="
isAdmin=${#authorization.expression('hasRole(''ADMIN'')')},
canEdit=${isAdmin or #authentication.name == user.username}
">

<table>
    <tr>
        <td>ID:</td>
        <td th:text="${{user.id}}" ></td>
    </tr>
    <tr>
        <td>Nazwa:</td>
        <td th:text="${{user.username}}" ></td>
    </tr>
    <tr>
        <td>Opis:</td>
        <td th:text="${{user.description}}" ></td>
    </tr>
</table>

<div th:if="${canEdit}" >
    <form th:action="@{'/user/' + ${userId} + '/edit'}" method="get">
        <input type="submit" value="Edytuj użytkownika"/>
    </form>
</div>

<h1>Założone drużyny</h1>

<table>
    <tr th:each="team: ${teamsOwned}" >
        <td th:text="${{team.id}}" ></td>
        <td th:text="${{team.name}}" ></td>
        <td th:text="${{team.description}}" ></td>
    </tr>
</table>

<h1>Gracz w drużynach</h1>

<table>
    <tr th:each="team: ${teamRegistrations}" >
        <td th:text="${{team.id}}" ></td>
        <td th:text="${{team.name}}" ></td>
        <td th:text="${{team.description}}" ></td>
    </tr>
</table>

<h1>Założone turnieje</h1>

<table>
    <tr th:each="tournament: ${tournamentsOwned}" >
        <td th:text="${{tournament.name}}" ></td>
        <td th:text="${{tournament.description}}" ></td>
        <td th:text="${{tournament.startDate}}" ></td>
        <td th:if="${tournament.endDate != null}" th:text="${{tournament.endDate}}" ></td>
    </tr>
</table>

<h1>Zarządzane turnieje</h1>

<table>
    <tr th:each="tournament: ${tournamentsManaged}" >
        <td th:text="${{tournament.name}}" ></td>
        <td th:text="${{tournament.description}}" ></td>
        <td th:text="${{tournament.startDate}}" ></td>
        <td th:if="${tournament.endDate != null}" th:text="${{tournament.endDate}}" ></td>
    </tr>
</table>

</body>
</html>